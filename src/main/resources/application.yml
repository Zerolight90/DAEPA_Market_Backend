spring:
  config:
    import: optional:file:.env[.properties]

  application:
    name: daepa-backend

  profiles:
    default: dev
    active: prod

  jackson:
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false

  servlet:
    multipart:
      max-file-size: 20MB
      max-request-size: 20MB

  jpa:
    open-in-view: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true

  # üìß Î©îÏùº ÏÑ§Ï†ï
  mail:
    host: smtp.naver.com
    port: 465
    username: ${NAVER_EMAIL_USERNAME}
    password: ${NAVER_EMAIL_PASSWORD}
    default-encoding: UTF-8
    properties:
      mail.transport.protocol: smtp
      mail.smtp.auth: true
      mail.debug: true
      mail.smtp.ssl.enable: true
      mail.smtp.ssl.trust: smtp.naver.com
      mail.smtp.starttls.enable: false
      mail.smtp.ssl.protocols: TLSv1.2

  # ‚úÖ MyBatis
  mybatis:
    mapper-locations: classpath*:mapper/**/*.xml
    type-aliases-package: com.daepa.**.domain
    configuration:
      map-underscore-to-camel-case: true
      cache-enabled: false

  # ‚úÖ ÏÜåÏÖú Î°úÍ∑∏Ïù∏ (Naver + Kakao)
  security:
    oauth2:
      client:
        registration:
          # ‚úÖ ÎÑ§Ïù¥Î≤Ñ
          naver:
            client-id: ${NAVER_CLIENT_ID}
            client-secret: ${NAVER_CLIENT_SECRET}
            redirect-uri: http://localhost:8080/login/oauth2/code/naver
            authorization-grant-type: authorization_code
            scope:
              - name
              - email
              - mobile
              - nickname
              - gender
              - birthday
              - birthyear
              - profile_image
            client-name: Naver

          # ‚úÖ Ïπ¥Ïπ¥Ïò§
          kakao:
            client-id: ${KAKAO_CLIENT_ID}          # Ïπ¥Ïπ¥Ïò§ REST API ÌÇ§
            client-secret: ${KAKAO_CLIENT_SECRET}  # (ÏÑ†ÌÉù, Secret Î∞úÍ∏âÎ∞õÏùÄ Í≤ΩÏö∞Îßå)
            redirect-uri: http://localhost:8080/login/oauth2/code/kakao
            authorization-grant-type: authorization_code
            client-authentication-method: client_secret_post
            scope:
              - profile_nickname
              - account_email
            client-name: Kakao

        provider:
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response

          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: https://kauth.kakao.com/oauth/token
            user-info-uri: https://kapi.kakao.com/v2/user/me
            user-name-attribute: id

server:
  tomcat:
    threads:
      max: 200
      min-spare: 10

logging:
  level:
    root: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

custom:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS}

app:
  upload:
    dir: ${UPLOAD_DIR}
    base-url: ${UPLOAD_BASE_URL}
  jwt:
    issuer: daepa-market
    secret: ${JWT_SECRET}
    access-exp-min: 600
    refresh-exp-days: 14
  cookie:
    secure: false
    same-site: Lax
    path: /
    defaultcookie: 3600
  front-url: ${APP_FRONT_URL:http://localhost:3000}

cloud:
  aws:
    credentials:
      access-key: ${AWS_ACCESS_KEY_ID}
      secret-key: ${AWS_SECRET_ACCESS_KEY}
    region:
      static: ap-northeast-2

management:
  endpoints:
    web:
      exposure:
        include: health, info # health ÏóîÎìúÌè¨Ïù∏Ìä∏Îßå ÎÖ∏Ï∂ú
      base-path: /actuator
    endpoint:
      health:
        probes:
          enabled: true
        show-details: never

